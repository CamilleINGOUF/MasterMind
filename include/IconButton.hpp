#ifndef ICON_BUTTON_HPP_
#define ICON_BUTTON_HPP_

////////////////////////////////////////////////////////////
/// Headers
////////////////////////////////////////////////////////////
#include <functional>
#include <SFML/Graphics.hpp>

typedef std::function<void()> Callback;

////////////////////////////////////////////////////////////
/// \brief Un bouton représenté par 2 sprites
///
////////////////////////////////////////////////////////////
class IconButton : public sf::Drawable
{
public:  
  ////////////////////////////////////////////////////////////
  /// \brief Construit un bouton
  ///
  /// \param sprite le sprite de base
  /// \param activeSprite le sprite de click
  ///
  ////////////////////////////////////////////////////////////
  IconButton(const sf::Sprite& sprite, const sf::Sprite& activeSprite);

  ////////////////////////////////////////////////////////////
  /// \brief Attrape les événements pour mettre à jour le bouton
  ///
  /// \param event voir sf::Event
  ///
  ////////////////////////////////////////////////////////////
  void catchEvent(sf::Event& event);

  ////////////////////////////////////////////////////////////
  /// \brief Définit la position du bouton
  ///
  /// \param position la nouvelle position du bouton
  ///
  ////////////////////////////////////////////////////////////
  void setPosition(const sf::Vector2f& position);

  ////////////////////////////////////////////////////////////
  /// \brief Définit l'event du bouton
  ///
  /// \param callback l'event du bouton
  ///
  ////////////////////////////////////////////////////////////
  void setCallback(Callback callback);

  ////////////////////////////////////////////////////////////
  /// \brief Retourne true si le bouton est actif
  ///
  ////////////////////////////////////////////////////////////
  bool isActive() const;

  ////////////////////////////////////////////////////////////
  /// \brief Active le bouton
  ///
  ////////////////////////////////////////////////////////////
  void activate();
  
private:
  virtual void draw(sf::RenderTarget& target, sf::RenderStates states) const;

  ////////////////////////////////////////////////////////////  
  /// Données membres
  ////////////////////////////////////////////////////////////
  Callback        _callback;       ///< L'event associé au bouton
  sf::Sprite      _sprite;
  sf::Sprite      _activeSprite;
  bool            _active;
};

#endif // BUTTON_HPP_
