#ifndef COMBINAISON_HPP_
#define COMBINAISON_HPP_

////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include "Pion.hpp"

#include <vector>
#include <string>


////////////////////////////////////////////////////////////
/// \brief Modélise une combinaison de 4 pions (couleurs)
////////////////////////////////////////////////////////////
class Combinaison
{  
public:
  ////////////////////////////////////////////////////////////
  /// \brief Constructeur par défaut
  ///
  ////////////////////////////////////////////////////////////
  Combinaison();

  ////////////////////////////////////////////////////////////
  /// \brief Construit la combinaison à partir de pions
  ///
  /// \param pions les pions constituant la combinaison
  ///
  ////////////////////////////////////////////////////////////
  Combinaison(const std::vector<Pion>& pions);

  ////////////////////////////////////////////////////////////
  /// \brief Le destructeur de combinaison
  ///
  ////////////////////////////////////////////////////////////
  ~Combinaison();

  ////////////////////////////////////////////////////////////
  /// \brief Retourne les composants de la combinaison
  ///
  /// \return les composants de la combinaison
  ///
  ////////////////////////////////////////////////////////////
  std::vector<Pion> getPions() const;

  ////////////////////////////////////////////////////////////
  /// \brief Définit les composants de la combinaison
  ///
  /// \param pions les pions constituants la combinaison
  ///
  ////////////////////////////////////////////////////////////
  void setPions(const std::vector<Pion>& pions);

  ////////////////////////////////////////////////////////////
  /// \brief Définit les composants de la combinaison
  ///
  /// \param pions les pions sous chaîne de caractères
  ///
  ////////////////////////////////////////////////////////////
  void setPions(const std::string& pions);
  
  bool operator==(const Combinaison & that) const;
  Combinaison & operator=(const Combinaison & c);

  ////////////////////////////////////////////////////////////
  /// \brief Retourne la combinaison en string
  ///
  ////////////////////////////////////////////////////////////
  const std::string toString() const;

  ////////////////////////////////////////////////////////////
  /// \brief Check si le pion est présent dans la combinaison
  ///
  /// \param p Un pion
  ///
  /// \return True si le pion est dans la combinaison, false sinon
  ///
  ////////////////////////////////////////////////////////////
  bool pionDansLaCombinaison(Pion p);
  
  ////////////////////////////////////////////////////////////
  /// \brief Retourne une combinaison saisie au clavier
  ///
  /// \return Une combinaison saisie au clavier
  ///
  ////////////////////////////////////////////////////////////
  static Combinaison fromInput();


  ////////////////////////////////////////////////////////////
  /// \brief Retourne true si le caractère est autorisé pour une combinaison
  ///
  ////////////////////////////////////////////////////////////
  static bool isColor(const char c);
  
private:
  ////////////////////////////////////////////////////////////
  /// \brief Retourne true si il est possible de créer
  /// une combinaison à partir d'une châine de caractères
  ///
  ////////////////////////////////////////////////////////////
  static bool isValid(const std::string& input);

  ////////////////////////////////////////////////////////////
  /// Données membres
  ////////////////////////////////////////////////////////////
  std::vector<Pion> _pions; ///< Les 4 pions
};

std::ostream & operator<<(std::ostream & os, const Combinaison & c);
std::istream & operator>>(std::istream & is,  Combinaison & c);

bool isCombinaisonValid(const std::string& input);

#endif
